/**
 * 年度进度条组件样式
 */

// 年度进度条容器
.year-progress-container {
  @apply relative pb-3.5;
  
  // CSS 变量定义
  --progress-fill: rgb(125, 185, 222);
  --progress-bg: #e7e7eb;
  --progress-text: #7db9de;
  
  // 进度条主体
  .year-progress-bar {
    @apply relative w-full;
    
    // 进度条背景
    .progress-background {
      @apply relative h-[2px] w-full overflow-hidden rounded-full;
      background-color: var(--progress-bg);
      
      // 进度条填充
      .progress-fill {
        @apply h-full transition-all duration-2000 ease-out;
        background-color: var(--progress-fill);
        width: 0%;
        border-radius: inherit;
      }
    }
    
    // 进度百分比标签
    .progress-label {
      @apply absolute top-1/2 text-xs pointer-events-none;
      @apply opacity-0 transition-opacity duration-200;
      @apply transform -translate-y-1/2 translate-x-2;
      
      color: var(--progress-text);
      font-weight: 500;
      font-size: 0.75rem;
      line-height: 1;
      
      // 确保标签不会超出容器
      white-space: nowrap;
      z-index: 10;
    }
  }
  
  // 悬停效果
  &:hover {
    .progress-label {
      @apply opacity-100;
    }
    
    .progress-fill {
      // 悬停时稍微增强颜色
      filter: brightness(1.1);
    }
  }
  
  // 响应式设计
  @media (max-width: 768px) {
    @apply mb-3;
    
    .progress-background {
      @apply h-[1.5px];
    }
    
    .progress-label {
      @apply text-[10px];
    }
  }
  
  // 深色主题支持
  @media (prefers-color-scheme: dark) {
    --progress-fill: rgb(125, 185, 222);
    --progress-bg: #374151;
    --progress-text: #f9fafb;
  }
}

// 动画效果
@keyframes progressFill {
  from {
    width: 0%;
  }
  to {
    width: var(--target-width, 0%);
  }
}

// 加载动画
.year-progress-container.loading {
  .progress-fill {
    animation: progressFill 1s ease-out;
  }
}

// 高对比度模式支持
@media (prefers-contrast: high) {
  .year-progress-container {
    --progress-fill: #0066cc;
    --progress-bg: #cccccc;
    --progress-text: #000000;
    
    .progress-background {
      @apply border border-gray-400;
    }
  }
}

// 减少动画模式支持
@media (prefers-reduced-motion: reduce) {
  .year-progress-container {
    .progress-fill {
      @apply transition-none;
    }
    
    .progress-label {
      @apply transition-none;
    }
  }
}