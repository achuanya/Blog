@import "../../public/assets/fonts/TsangerJinKai01-W04/result.css"; /* 仓耳今楷字体 */
@import "tailwindcss";              /* Tailwind CSS 框架 */
@import "./typography.css";         /* 排版样式 */

/* 定义深色主题的自定义变体选择器 */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* 浅色主题颜色变量定义 */
:root,
html[data-theme="light"] {
  --background: #fdfdfd;    /* 背景色 */
  --foreground: #282728;    /* 前景色（文字）*/
  --accent: #006cac;        /* 强调色 */
  --muted: #e6e6e6;         /* 静音色（次要元素） */
  --border: #ece9e9;        /* 边框色 */
  
  /* 评论数统计专用颜色变量 */
  --comment-count-bg: #96d7f5;      /* 浅蓝色背景 */
  --comment-count-text: #fff;    /* 深蓝色文字 */
  --comment-count-hover-bg: #2ea9df; /* 悬停时的背景色 */
  
  /* Tooltip 专用颜色变量 - 浅色主题 */
  --tooltip-bg: #ffffff;             /* Tooltip 背景色 */
  --tooltip-border: #e1e5e9;         /* Tooltip 边框色 */
  --tooltip-title: #0ea5e9;          /* Tooltip 标题颜色（蓝色主题色） */
  --tooltip-divider: #e1e5e9;        /* Tooltip 分割线颜色 */
  --tooltip-param-name: #6b7280;     /* Tooltip 参数名称颜色（灰色） */
  --tooltip-param-value: #0284c7;    /* Tooltip 参数值颜色（深蓝色） */
  --tooltip-article-title: #0969da;  /* Tooltip 文章标题颜色（GitHub 蓝） */
  --tooltip-shadow: 0 8px 24px rgba(140, 149, 159, 0.2); /* Tooltip 阴影 */
}

/* 深色主题颜色变量定义 */
html[data-theme="dark"] {
  --background: #212737;    /* 背景色 */
  --foreground: #eaedf3;    /* 前景色（文字）*/
  --accent: #ff6b01;        /* 强调色 - 橙色 */
  --muted: #343f60bf;       /* 静音色（次要元素）*/
  --border: #ab4b08;        /* 边框色 - 深橙 */
  
  /* 评论数统计专用颜色变量 */
  --comment-count-bg: #374151;      /* 深灰色背景 */
  --comment-count-text: #e5e7eb;    /* 浅灰色文字 */
  --comment-count-hover-bg: #4b5563; /* 悬停时的背景色 */
  
  /* Tooltip 专用颜色变量 - 深色主题 */
  --tooltip-bg: #161b22;             /* Tooltip 背景色 */
  --tooltip-border: #30363d;         /* Tooltip 边框色 */
  --tooltip-title: #ff8c1a;          /* Tooltip 标题颜色（橙色主题色） */
  --tooltip-divider: #30363d;        /* Tooltip 分割线颜色 */
  --tooltip-param-name: #8b949e;     /* Tooltip 参数名称颜色（灰色） */
  --tooltip-param-value: #ffa657;    /* Tooltip 参数值颜色（亮橙色） */
  --tooltip-article-title: #ff7b00;  /* Tooltip 文章标题颜色（橙色强调） */
  --tooltip-shadow: 0 16px 32px rgba(1, 4, 9, 0.85); /* Tooltip 阴影 */
}

/* Tailwind 主题颜色映射配置 */
@theme inline {
  --color-background: var(--background);  /* 背景色映射 */
  --color-foreground: var(--foreground);  /* 前景色映射 */
  --color-accent: var(--accent);          /* 强调色映射 */
  --color-muted: var(--muted);            /* 静音色映射 */
  --color-border: var(--border);          /* 边框色映射 */
}

/* 基础样式层 */
@layer base {
  /* 全局元素样式重置 */
  * {
    @apply border-border outline-accent/75;  /* 边框和焦点轮廓样式 */
    scrollbar-width: auto;                   /* 滚动条宽度 */
    scrollbar-color: var(--color-muted) transparent; /* 滚动条颜色 */
  }
  
  /* HTML 根元素样式 */
  html {
    @apply overflow-y-scroll scroll-smooth;  /* 垂直滚动条和平滑滚动 */
  }
  
  /* 页面主体样式 */
  body {
    @apply flex min-h-svh flex-col bg-background font-mono text-foreground selection:bg-accent/75 selection:text-background;
    font-family: Consolas,TsangerJinKai01 W04;
  }
  
  /* 链接和按钮的焦点样式 */
  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }
  
  /* 可交互按钮的鼠标指针样式 */
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
  
  /* 主要区块的布局约束 */
  section,
  footer {
    @apply mx-auto max-w-app px-4;  /* 居中对齐，最大宽度，水平内边距 */
  }
}

/* 自定义工具类 - 应用最大宽度约束 */
@utility max-w-app {
  @apply max-w-3xl;  /* 最大宽度设为 3xl（约 48rem/768px） */
}

/* 激活导航项的样式 */
.active-nav {
  @apply text-accent;  /* 使用强调色，移除下划线 */
}

/* 锚点滚动样式优化 */
/* 来源: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* 为所有锚点目标添加额外的滚动边距，避免内容被固定头部遮挡 */
:target {
  scroll-margin-block: 1rem;  /* 块方向滚动边距 1rem */
}

/* 评论数统计样式 */
.comment-count-badge {
  background-color: var(--comment-count-bg);
  color: var(--comment-count-text);
  border: 1px solid var(--comment-count-bg);
}

.comment-count-badge:hover {
  background-color: var(--comment-count-hover-bg);
  border-color: var(--comment-count-hover-bg);
}

/* 确保评论数文字在所有主题下都可见 */
.artalk-comment-count {
  font-weight: 500;
}

/* 当评论数为0时的特殊样式 */
.artalk-comment-count:empty::before {
  content: "0";
  opacity: 0.7;
}

/* Cal-Heatmap Tooltip 样式 - 使用专用颜色变量 */
.ch-tooltip {
  background: var(--tooltip-bg) !important;
  border: 1px solid var(--tooltip-border) !important;
  border-radius: 0.5rem !important;
  box-shadow: var(--tooltip-shadow) !important;
  padding: 0 !important;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace !important;
  font-size: 0.8125rem !important;
  line-height: 1.4 !important;
  max-width: 17.5rem !important;
  z-index: 9999 !important;
  color: var(--tooltip-text) !important;
}

/* 深色主题下的 tooltip 特殊样式 */
html[data-theme="dark"] .ch-tooltip,
#ch-tooltip[data-theme="dark"] {
  background: var(--tooltip-bg) !important;
  color: var(--tooltip-title) !important;
}

/* 浅色主题 - 无数据单元格样式 */
:root .ch-subdomain-bg {
  stroke: #1f23280d !important;
}

/* 深色主题 - 无数据单元格样式 */
html[data-theme="dark"] .ch-subdomain-bg {
  stroke-width: 1px !important;
}

/* 深色主题下的热力图颜色调整 - GitHub 风格 10 级配色 */
html[data-theme="dark"] .ch-subdomain-bg[fill="#ebedf0"] {
  fill: #161b22 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#9be9a8"] {
  fill: #0e4429 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#40c463"] {
  fill: #006d32 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#30a14e"] {
  fill: #26a641 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#216e39"] {
  fill: #39d353 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#1a5a2e"] {
  fill: #2ea043 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#0d4d21"] {
  fill: #238636 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#0a3f1a"] {
  fill: #196c2e !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#073214"] {
  fill: #0f5323 !important;
}

html[data-theme="dark"] .ch-subdomain-bg[fill="#05260f"] {
  fill: #033a16 !important;
}